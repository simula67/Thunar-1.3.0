<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Personalizzare Thunar</title><link rel="stylesheet" href="../thunar.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="Gestore di file Thunar"><link rel="up" href="index.html" title="Gestore di file Thunar"><link rel="prev" href="preferences.html" title="Preferenze di gestione dei file"><link rel="next" href="advanced-topics.html" title="Argomenti avanzati"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Personalizzare Thunar</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preferences.html">Indietro</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="advanced-topics.html">Avanti</a></td></tr></table><hr></div><div class="sect1" title="Personalizzare Thunar"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="customizing-thunar"></a>Personalizzare Thunar</h2></div></div></div><p>Questo capitolo illustra come sia possibile personalizzare alcune parti del gestore di file a seconda delle proprie necessità.</p><div class="sect2" title="Il menu «Invia a»"><div class="titlepage"><div><div><h3 class="title"><a name="sendto"></a>Il menu «Invia a»</h3></div></div></div><p>Thunar include un menu <span class="guilabel"><strong>Invia a</strong></span> che fornisce delle possibili destinazioni in cui i file e le cartelle possono essere inviati. Per accedere al menu <span class="guilabel"><strong>Invia a</strong></span>, selezionare <span class="guimenu"><strong>File</strong></span> &#8594; <span class="guimenuitem"><strong>Invia a</strong></span> dal menu principale, o fare clic con il tasto del mouse sul file o sulla cartella e selezionare <span class="guimenuitem"><strong>Invia a</strong></span>.</p><div class="screenshot"><div class="mediaobject"><img src="images/sendto-menu.png" alt="Menu «Invia a»"></div></div><p>Di norma, il menu <span class="guilabel"><strong>Invia a</strong></span> include una voce denominata <span class="guilabel"><strong>Scrivania (crea collegamento)</strong></span> per tutti i file e le cartelle, che crea semplicemente un collegamento sulla scrivania per ogni file selezionato. In più, se il <span class="guilabel"><strong>pannello delle scorciatoie</strong></span> è attivo, il menu presenta anche una ulteriore voce per le cartelle denominata <span class="guilabel"><strong>Pannello laterale (crea scorciatoia)</strong></span>, che permette all'utente di inserire una nuova scorciatoia al pannello laterale. Dopo queste voci, <strong class="application"><code>Thunar</code></strong> elenca le periferiche rimovibili attualmente collegate al computer. Nell'immagine in alto, il <span class="guilabel"><strong>Floppy Drive</strong></span> rappresenta una possibile destinazione a cui possono essere inviati i file. Si noti che il dispositivo è montato automaticamente una volta che è selezionato dal menu <span class="guilabel"><strong>Invia a</strong></span>, quindi non è necessario montarlo manualmente.</p><p>In aggiunta, <span class="guilabel"><strong>Thunar</strong></span> è distribuito con il plugin <span class="guilabel"><strong>Invia a</strong></span>, che aggiunge la voce <span class="guilabel"><strong>email</strong></span> al menu, il quale apre una nuova mail con allegato il file selezionato. Se la selezione contiene almeno una cartella, gli elementi selezionati vengono aggiunti a un archivio in formato ZIP prima di essere allegati alla email. Altrimenti, se la selezione contiene più file, o uno singolo, con una dimensione superiore a 200Kib, verrà richiesto all'utente se intende comprimere i file in un archivio ZIP, e inviare quest'ultimo.</p><p>Come molte altre caratteristiche di <strong class="application"><code>Thunar</code></strong>, il menu <span class="guilabel"><strong>Invia a</strong></span> può essere facilmente esteso, inserendo nuove destinazioni, dagli utenti e dagli sviluppatori di applicazioni avvalendosi dello standard per i <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fdesktop_2dentry_2dspec" target="_top">file di elementi desktop</a>. Questi file devono essere installati in una delle cartelle <code class="filename">$XDG_DATA_DIRS/Thunar/sendto/</code> (consultare le <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fbasedir_2dspec" target="_top">XDG Base Directory Specification</a> per maggiori dettagli sulla variabile <code class="literal">$XDG_DATA_DIRS</code>).</p><p>Il <code class="literal">MimeType</code> della destinazione <code class="filename">.desktop</code> specifica il tipo di file per i quali questa azione è disponibile nel menu <span class="guilabel"><strong>Send To</strong></span>. Per esempio, si supponga di voler aggiungere una voce per uno strumento di caricamento di un'immagine su <a class="ulink" href="http://flickr.com/" target="_top">Flickr</a> e che questa voce debba essere visualizzata solamente se la selezione contiene dei file in formato JPEG (gli altri formati non sono supportati da Flickr) e quindi si dovrebbe aggiungere una riga <code class="literal">MimeType=image/jpeg;</code>. Se non si specifica alcun <code class="literal">MimeType</code> la voce verrà visualizzata per qualsiasi tipo di file.</p><p>Qui sotto è mostrato un esempio completo utilizzando l'applicazione <span class="guibutton"><strong>postr</strong></span>:</p><pre class="programlisting">
# postr.desktop - Integrazione di postr nel
#                 menu "Invia a".
[Desktop Entry]
Type=Application
Version=1.0
Encoding=UTF-8
TryExec=postr
Exec=postr %F
Icon=postr
Name=Flickr
MimeType=image/jpeg;</pre><p>Se si installa questo in <code class="filename">~/.local/share/Thunar/sendto/</code> (la cartella va creata se non esiste), il menu <span class="guilabel"><strong>Invia a</strong></span> per i file JPEG visualizzerà la nuova voce <span class="guilabel"><strong>Flickr</strong></span>, che può essere utilizzata per inviare le proprie immagini JPEG al sito Flickr.</p><p>La <a class="ulink" href="http://thunar.xfce.org/pwiki/documentation/sendto_menu" target="_top">Wiki del progetto Thunar</a> contiene ulteriori esempi di destinazioni utili per il menu <span class="guilabel"><strong>Invia a</strong></span>. Chiunque può aggiungere alla Wiki dei nuovi esempi.</p></div><div class="sect2" title="Creatori di miniature"><div class="titlepage"><div><div><h3 class="title"><a name="thumbnailers"></a>Creatori di miniature</h3></div></div></div><p>Thunar si avvale di piccoli programmi per creare le miniature di alcuni tipi di file che saranno poi utilizzate per visualizzare l'anteprima del contenuto del file stesso. Questi piccoli strumenti vengono chiamati "thumbnailer". Thunar è distribuito con dei visualizzatori di miniature per le immagini e per i file degli stili di testo, e si avvale automaticamente dei thumbnailer installati per GNOME se è stato installato con il supporto per <code class="literal">gconf</code>. L'utente può comunque estendere dinamicamente le funzionalità di base con dei visualizzatori di miniature per dei tipi di file aggiuntivi.</p><p>Se si intende programmare un thumbnailer, sarà necessario iniziare con un programma che accetta almeno due parametri da linea di comando: il file di ingresso, che è il tipo di file che si desidera supportare, e il file di output, che è un file PNG in linea con le specifiche del formato dettate dallo <a class="ulink" href="http://jens.triq.net/thumbnail-spec/creation.html#AEN139" target="_top">standard di gestione delle miniature</a>. In aggiunta il programma dovrebbe anche accettare la dimensione desiderata della miniatura, caratteristica opzionale ma caldamente consigliata. Se si scrive il file di output con una dimensione arbitraria dell'immagine, Thunar la scalerà successivamente alla dimensione desiderata, il che può produrre risultati peggiori rispetto alla generazione diretta della miniatura alla dimensione desiderata.</p><p>Una volta terminata la realizzazione del generatore di miniature, è necessario registrarlo in modo che Thunar possa localizzarlo e utilizzarlo. Tutto ciò che è necessario fare è installare un file di descrizione per il thumbnailer (un file <code class="filename">.desktop</code>) in uno dei percorsi <code class="filename">$XDG_DATA_DIRS/thumbnailers/</code>. Per esempio, se si desidera registrare un thumbnailer solo per il proprio account utente, è possibile installare il file nella cartella <code class="filename">~/.local/share/thumbnailers/</code>. Il file <code class="filename">.desktop</code> per i creatori di miniature ha il seguente formato.</p><div class="sect3" title="Formato del file di descrizione del creatore di miniature"><div class="titlepage"><div><div><h4 class="title"><a name="thumbnailer-desktop-file-format"></a>Formato del file di descrizione del creatore di miniature</h4></div></div></div><p>I file di descrizione dei thumbnailer utilizzano il <a class="ulink" href="http://standards.freedesktop.org/desktop-entry-spec/latest/" target="_top">formato per gli elementi desktop</a> con uno speciale <code class="literal">Tipo</code> di <code class="literal">X-Thumbnailer</code> e un particolare campo <code class="literal">X-Thumbnailer-Exec</code> con nuovi codici di campo. Fondamentalmente, un file di descrizione per un thumbnailer ha il seguente formato.</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=Il proprio thumbnailer
MimeType=i-propri-/mime-type-supportati;
X-Thumbnailer-Exec=il-proprio-thumbnailer %i %o %s</pre><p>I campi <code class="literal">Version</code> e <code class="literal">Encoding</code> sono imposti dalle Desktop Entry Specification; utilizzare i valori mostrati nell'esempio precedente. Il campo <code class="literal">Type</code> deve contenere il valore speciale <code class="literal">X-Thumbnailer</code>, altrimenti il thumbnailer non verrà riconosciuto. Il valore <code class="literal">Name</code> descrive il proprio thumbnailer.</p><p>Il campo <code class="literal">X-Thumbnailer-Exec</code> contiene il comando per eseguire il proprio thumbnailer e supporta certi codici di campo che verranno sostituiti all'esecuzione del creatore di miniature. I codici di campo riconosciuti sono i seguenti:</p><div class="variablelist"><dl><dt><span class="term"><code class="varname">%i</code></span></dt><dd><p>Il percorso locale al file di cui creare una miniatura. Può essere un percorso relativo alla directory da cui il creatore di miniature è stato invocato o un percorso assoluto.</p></dd><dt><span class="term"><code class="varname">%o</code></span></dt><dd><p>Il percorso locale al file in cui archiviare le miniature generate. Il file deve essere scritto in formato PNG valido in accordo allo standard sulle miniature (vedere più sopra). Il percorso non deve terminare con <code class="literal">.png</code>, che assume importanza se si invocano alcuni strumenti esterni.</p></dd><dt><span class="term"><code class="varname">%s</code></span></dt><dd><p>La dimensione desiderata in pixel delle anteprime. Questo parametro è facoltativo.</p></dd><dt><span class="term"><code class="varname">%u</code></span></dt><dd><p>Simile a <code class="literal">%i</code>, ma sostituito con l'URI del file, in luogo del percorso. Questa opzione è stata aggiunta per aumentare la compatibilità con l'ambiente GNOME.</p></dd><dt><span class="term"><code class="varname">%%</code></span></dt><dd><p>Verrà sostituito con un singolo <code class="literal">%</code>.</p></dd></dl></div><p>È necessario includere almeno <code class="literal">%o</code> e <code class="literal">%i</code> oppure <code class="literal">%u</code>, altrimenti il proprio creatore di miniature risulterà inutilizzabile.</p><p>Il <code class="literal">MimeType</code> elenca i tipi MIME, separati da punti e virgola, per i quali il proprio creatore di miniature è in grado di generare delle anteprime.</p></div><div class="sect3" title="Esempio di creatore di miniature per file EPS"><div class="titlepage"><div><div><h4 class="title"><a name="eps-thumbnailer-example"></a>Esempio di creatore di miniature per file EPS</h4></div></div></div><p>Questo esempio mostra come scrivere e installare  un nuovo creatore di miniature, per i file in formato <code class="filename">.eps</code>, che utilizza il comando <span class="command"><strong>convert</strong></span> fornito da pacchetto ImageMagick. Si ìinizierà con un semplice script che invoca il comando <span class="command"><strong>convert</strong></span> per generare una miniatura della dimensione richiesta..</p><pre class="programlisting">
#!/bin/sh
#
# eps-thumbnailer - Esempio di script per la creazione di miniature di file in formato EPS.
#
# Utilizzo: esp-thumbnailer eps-file png-dimensione file
#

# parametri della linea di comando
ifile=$1
ofile=$2
size=$3

# utilizzo del comando convert (ImageMagick)
exec convert "eps:$ifile" -scale "$sizex$size" "png:$ofile"</pre><p>Salvare questo script in un file <code class="filename">eps-thumbnailer</code>, assicurarsi che sia eseguibile e installarlo in <code class="filename">/usr/local/bin</code>.</p><pre class="screen">
$ chmod +x eps-thumbnailer
$ sudo install eps-thumbnailer /usr/local/bin/eps-thumbnailer</pre><p>In seguito, è necessario creare il file di descrizione del thumbnailer <code class="filename">eps-thumbnailer.desktop</code> con questo contenuto:</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=EPS Thumbnailer
TryExec=convert
MimeType=image/x-eps;
X-Thumbnailer-Exec=/usr/local/bin/eps-thumbnailer %i %o %s</pre><p>Questo file devo essere installato in <code class="filename">/usr/local/share/thumbnailers</code> (creare la cartella se non esiste).</p><pre class="screen">
$ sudo install -d /usr/local/share/thumbnailers
$ sudo install eps-thumbnailer.desktop /usr/local/share/thumbnailers/eps-thumbnailer.desktop</pre><p>Il file <code class="filename">eps-thumbnailer.desktop</code> utilizza la chiave speciale <code class="literal">TryExec</code> che, se specificata, richiama un comando che deve essere presente nel sistema per permettere l'utilizzo del creatore di miniature. Nell'esempio proposto, lo script è inutilizzabile se l'utilità <span class="command"><strong>convert</strong></span> non è presente.</p><p>L'ultimo passo consiste nella rigenerazione dela cache del creatore di miniature, in modo che Thunar possa utilizzarlo. La cache del creatore di miniature si trova in <code class="filename">$XDG_CACHE_HOME/Thunar/thumbnailers.cache</code> (a meno che non sia stata impostata diversamente dall'utente o dall'amministratore del sistema, la variabile <code class="varname">$XDG_CACHE_HOME</code> punta la cartella <code class="filename">~/.cache/</code>). La cache del creatore di miniature è rigenerata periodicamente da Thunar, ma è possibbile forzare questa operazione invocando l'utilità <code class="filename">thunar-vfs-update-thumbnailers-cache-1</code> fornita con Thunar. Questa è generalmente installata nella sotto cartella <code class="filename">libexec</code> del proprio prefisso d'installazione  (<code class="filename">sbin</code> nei sistemi Debian/Ubuntu). Quindi, per esempio, se Thunar è installato in <code class="filename">/usr</code>, invocare l'utilità nel modo seguente:</p><pre class="screen">$ /usr/libexec/thunar-vfs-update-thumbnailers-cache-1</pre><p>Assicurarsi però di eseguire il programma dal proprio account utente, non da quello del super utente, dato che la cache del thumbnailer risiede nella propria cartella «casa», invece che in una posizione accessibile da tutto il sistema.</p><p>A questo punto, se Thunar è compilato con il supporto per la monitorizzazione dell'alterazione dei file (utilizzando i servizi FAM o Gamin), riconoscerà automaticamente la cache del nuovo creatore di miniature e sarà in grado di generare le miniature utilizzando il creatore personalizzato. Diversamente, sarà necessario riavviare completamente Thunar per rendere effettivi i cambiamenti, utilizzando:</p><pre class="screen">$ Thunar -q</pre><p>per terminare ogni istanza in esecuzione, e in seguito riavviarlo tramite il proprio avviatore.</p></div><div class="sect3" title="Eliminare delle miniature"><div class="titlepage"><div><div><h4 class="title"><a name="cleaning-up-thumbnails"></a>Eliminare delle miniature</h4></div></div></div><p>Le miniature create vengono salvate nella cartella <code class="filename">~/.thumbnails/</code> nel rispetto dello <a class="ulink" href="http://jens.triq.net/thumbnail-spec/index.html" target="_top">standard di gestione delle miniature</a>. Se si intende provare un nuovo thumbnailer, può essere utile cancellare tutte le miniature utilizzando il comando</p><pre class="screen">$ rm -rf ~/.thumbnails/</pre><p>che permette inoltre di liberare un po' di spazio nella propria cartella casa. Dato che tutte le informazioni salvate all'interno di questa cartella sono state automaticamente generate da dei file presenti nel proprio file system, non si corre il rischio di perdere dei dati sensibili.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preferences.html">Indietro</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="advanced-topics.html">Avanti</a></td></tr><tr><td width="40%" align="left" valign="top">Preferenze di gestione dei file </td><td width="20%" align="center"><a accesskey="h" href="index.html">Partenza</a></td><td width="40%" align="right" valign="top"> Argomenti avanzati</td></tr></table></div></body></html>
