<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Parametrització de Thunar</title><link rel="stylesheet" href="../thunar.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="Gestor de fitxers Thunar"><link rel="up" href="index.html" title="Gestor de fitxers Thunar"><link rel="prev" href="preferences.html" title="Preferències del gestor de fitxers"><link rel="next" href="advanced-topics.html" title="Temes avançats"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Parametrització de Thunar</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preferences.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="advanced-topics.html">Següent</a></td></tr></table><hr></div><div class="sect1" title="Parametrització de Thunar"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="customizing-thunar"></a>Parametrització de Thunar</h2></div></div></div><p>Aquest capítol mostra com ajustar certes parts del gestor de fitxers a les vostres necessitats.</p><div class="sect2" title="El menú «Envia a»"><div class="titlepage"><div><div><h3 class="title"><a name="sendto"></a>El menú «Envia a»</h3></div></div></div><p>Thunar té un menú <span class="guilabel"><strong>Envia a</strong></span> i que is ofereix destinataris on es poden enviar fitxers i carpetes. Per accedir al menú <span class="guilabel"><strong>Envia a</strong></span>, seleccioneu al menú principal <span class="guimenu"><strong>Fitxer</strong></span> &#8594; <span class="guimenuitem"><strong>Envia a</strong></span>, o feu clic-dret sobre un fitxer o carpeta i seleccioneu <span class="guimenuitem"><strong>Envia a</strong></span>.</p><div class="screenshot"><div class="mediaobject"><img src="images/sendto-menu.png" alt="Menú «Envia a»"></div></div><p>Per defecte, el menú <span class="guilabel"><strong>Envia a</strong></span> inclou una entrada anomenada <span class="guilabel"><strong>Escriptori (crea enllaç)</strong></span>, per a tots els fitxers i carpetes, i que tant sols crea un enllaç a l'escriptori per cada fitxer seleccionat. A més a més, si la <span class="guilabel"><strong>subfinestra de dreceres</strong></span> està activa, el menú també té una entrada anomenada <span class="guilabel"><strong>Subfinestra lateral (afegeix drecera)</strong></span> per les carpetes, i que us permet afegir noves dreceres a la subfinestra lateral. A continuació d'aquestes entrades, <strong class="application"><code>Thunar</code></strong> mostra els dispositius extractables connectats a l'ordinador. En la captura anterior, <span class="guilabel"><strong>Disquetera</strong></span> representa un destinatari possible on enviar fitxers. Tingueu present que el dispositiu es munta automàticament quan seleccioneu en el menú <span class="guilabel"><strong>Envia a</strong></span>, d'aquesta manera no caldrà que ho feu manualment.</p><p>A més a més, <strong class="application"><code>Thunar</code></strong> també té el connector <strong class="application"><code>thunar-sendto-email</code></strong>, que afegeix l'entrada <span class="guilabel"><strong>Destinatari de correu</strong></span> al menú, i que obre el programa per escriure correus amb el fitxer seleccionat adjunt en el nou correu. Si la selecció conté almenys una carpeta, els elements seleccionats s'afegeixen comprimits en un arxiu (ZIP) abans d'adjuntar-los al correu. En la resta de casos, si la selecció conté més d'un fitxer, o un però més gran de 200Kib, se li preguntarà a l'usuari si vol empaquetar-los en un arxiu (ZIP), i enviar l'arxiu.</p><p>Com moltes altres funcionalitats de <strong class="application"><code>Thunar</code></strong>, el menú <span class="guilabel"><strong>Envia a</strong></span> és fàcilment configurable per l'usuari i desenvolupadors d'aplicacions amb nous destinataris, emprant l'estàndard <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fdesktop_2dentry_2dspec" target="_top">fitxers d'entrada d'escriptori</a>. Aquests fitxers s'han d'insta&#320;lar dins d'alguna de les carpetes <code class="filename">$XDG_DATA_DIRS/Thunar/sendto/</code> (veieu <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fbasedir_2dspec" target="_top">Especificació de directoris base XDG</a> per detalls sobre la variable <code class="literal">$XDG_DATA_DIRS</code>).</p><p>El <code class="literal">MimeType</code> del destinatari de <code class="filename">.desktop</code> indica el tipus de fitxer per al que aquesta acció estarà disponible en el menú <span class="guilabel"><strong>Envia a</strong></span>. Per exemple, suposem que voleu afegir una entrada per la utilitat de pujada d'imatges <a class="ulink" href="http://flickr.com/" target="_top">Flickr</a>, per tant aquesta entrada només s'hauria de mostrar pels fitxers JPEG (altres formats de fitxers no funcionan a Flickr) i per tant hauríeu d'afegir la línia <code class="literal">MimeType=image/jpeg;</code>. Si no especifiqueu cap <code class="literal">MimeType</code> l'entrada es mostrarà per tots els tipus de fitxers.</p><p>A continuació es mostra un exemple per <strong class="application"><code>postr</code></strong>:</p><pre class="programlisting">
# postr.desktop - Integrate postr into
#                 the "Send To" menu.
[Desktop Entry]
Type=Application
Version=1.0
Encoding=UTF-8
TryExec=postr
Exec=postr %F
Icon=postr
Name=Flickr
Name[ca]=Flickr
MimeType=image/jpeg;</pre><p>Si insta&#320;leu aquest fitxer a <code class="filename">~/.local/share/Thunar/sendto/</code> (creeu la carpeta si aquesta no existeix), el menú <span class="guilabel"><strong>Envia a</strong></span> pels fitxers JPEG mostrarà la nova entrada <span class="guilabel"><strong>Flickr</strong></span>, que es pot emprar per pujar fotos a Flickr.</p><p>La <a class="ulink" href="http://thunar.xfce.org/pwiki/documentation/sendto_menu" target="_top">wiki del projecte Thunar</a> té més exemples de destinataris  pel menú <span class="guilabel"><strong>Envia a</strong></span>. No us reprimiu d'afegir més exemples a la pàgina de la wiki.</p></div><div class="sect2" title="Miniaturitzadors"><div class="titlepage"><div><div><h3 class="title"><a name="thumbnailers"></a>Miniaturitzadors</h3></div></div></div><p>Thunar empra algunes petites utilitats per crear les miniatures d'alguns tipus de fitxer, així com per mostrar la miniatura com una vista prèvia del contingut del fitxer. Aquestes petites utilitats les anomenem miniaturitzadors. Thunar ve amb miniaturitzadors per imatges i fitxers de tipus de lletra, també empra els miniaturitzadors de GNOME de forma automàtica si aquests s'han insta&#320;lat amb compatibilitat <code class="literal">gconf</code>. En qualsevol cas, es pot ampliar dinàmicament aquesta funcionalitat per altres tipus de fitxer.</p><p>Si voleu escriure un miniaturitzador personalitzat, us caldrà començar amb un programa que permeti almenys dos paràmetres de línia d'ordres, el fitxer d'entrada, que és el tipus de fitxer al que voleu afegir aquesta funcionalitat i el fitxer de sortida, que és un fitxer PNG que compleix amb el format definit en aquest <a class="ulink" href="http://jens.triq.net/thumbnail-spec/creation.html#AEN139" target="_top">estàndard de ges</a>.A més a més, cal que el programe accepti la mida desitjada de la miniatura (és opcional però molt recomanable). Si la mida de la imatge és d'una mida diferent a la prevista, Thunar l'haurà d'escalar a la mida correcta i, això, por produir un resultat pitjor que si s'hagués general la miniatura amb la mida requerida.</p><p>Un com heu fet la vostra utilitat per crear miniatures, haureu de registrar el vostre miniaturitzador, perquè d'aquesta manera Thunar sigui capaç d'emprar-la. A partir d'aquí l'únic que us cal fer és insta&#320;lar una descripció del fitxer al miniaturitzador (un fitxer <code class="filename">.desktop</code>) en algun dels directoris  <code class="filename">$XDG_DATA_DIRS/thumbnailers/</code>. Per exemple, si voleu registrar el miniaturitzador només per el vostre compte d'usuari, el podeu insta&#320;lar a la carpeta <code class="filename">~/.local/share/thumbnailers/</code>. El fitxer <code class="filename">.desktop</code> per les miniatures té el següent format.</p><div class="sect3" title="Format de fitxers de descripció de miniaturitzadors"><div class="titlepage"><div><div><h4 class="title"><a name="thumbnailer-desktop-file-format"></a>Format de fitxers de descripció de miniaturitzadors</h4></div></div></div><p>El fitxer de descripció de miniaturitzador empra aquest <a class="ulink" href="http://standards.freedesktop.org/desktop-entry-spec/latest/" target="_top">format de registre d'escriptori</a> amb un tipus «<code class="literal">Type</code>» especial amb el valor <code class="literal">X-Thumbnailer</code> i amb un altre camp especial amb els codis dels fitxers <code class="literal">X-Thumbnailer-Exec</code>. Bàsicament, un fitxer de descripció de miniaturitzador t'e el següent format.</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=Your Thumbnailer
Name[ca]=El vostre miniaturitzador
MimeType=your-supported/mime-type;
X-Thumbnailer-Exec=your-thumbnailer %i %o %s</pre><p><code class="literal">Version</code> i <code class="literal">Encoding</code> són obligatoris segons l'especificació del format de registre d'escriptori i, per tant, empreu els valors de l'exemple anterior. El camp <code class="literal">Type</code> ha de tenir el valor especial <code class="literal">X-Thumbnailer</code> i, en qualsevol altre cal, el vostre miniaturitzador no serà reconegut. El valor de  <code class="literal">Name</code> descriu el vostre miniaturitzador.</p><p>El camp <code class="literal">X-Thumbnailer-Exec</code> té l'ordre que executarà el miniaturitzador, i és compatible amb diversos codis que seran substituïts quan s'executi el miniaturitzador. Els codis són els següents:</p><div class="variablelist"><dl><dt><span class="term"><code class="varname">%i</code></span></dt><dd><p>El camí local al fitxer d'entrada al que se li crearà la miniatura. Pot ser tant un camí relatiu al directori en el que roman el miniaturitzador com un camí absolut.</p></dd><dt><span class="term"><code class="varname">%o</code></span></dt><dd><p>El camí local al fitxer de sortida on es desarà la miniatura generada. El fitxer de sortida s'ha d'escriure en un fitxer PNG vàlid i d'acord amb l'estàndard de miniatures (veieu més a dalt). Heu de tenir en compte que el camí no ha d'acabar amb <code class="literal">.png</code>, ja que això pot ser important si llanceu algunes utilitats de terceres parts.</p></dd><dt><span class="term"><code class="varname">%s</code></span></dt><dd><p>La mida desitjada i en píxels de la miniatura que es generarà. Aquest paràmetre és opcional.</p></dd><dt><span class="term"><code class="varname">%u</code></span></dt><dd><p>Similar a <code class="literal">%i</code>, però amb la URI del fitxer en lloc del camí. Això es va afegir per compatibilitat amb GNOME.</p></dd><dt><span class="term"><code class="varname">%%</code></span></dt><dd><p>Es substituirà per un únic <code class="literal">%</code>.</p></dd></dl></div><p>Com mínim heu d'incloure <code class="literal">%o</code> i <code class="literal">%i</code> o <code class="literal">%u</code>, en cas contrari el vostre miniaturitzador no serà d'utilitat.</p><p>La llista de <code class="literal">MimeType</code> és el llistat de tipus MIME &#8212;separat per comes&#8212; pel qual els vostre miniaturitzador serà capaç de crear vistes prèvies.</p></div><div class="sect3" title="Exemple de miniaturitzador EPS"><div class="titlepage"><div><div><h4 class="title"><a name="eps-thumbnailer-example"></a>Exemple de miniaturitzador EPS</h4></div></div></div><p>Aquest exemple demostra com es pot escriure i insta&#320;lar un nou miniaturitzador per fitxers <code class="filename">.eps</code> i que empra l'ordre <span class="command"><strong>convert</strong></span> la qual forma par de ImageMagick. Primer, creem un script que crida a <span class="command"><strong>convert</strong></span> per generar una miniatura de la mida que ens cal.</p><pre class="programlisting">
#!/bin/sh
#
# eps-thumbnailer - Exemple d'script de miniaturització per fitxers EPS.
#
# Ús: esp-thumbnailer FITXER-EPS FITXER-PNG MIDA
#

# paràmetres de la línia d'ordres
ifile=$1
ofile=$2
size=$3

# crida a convert (ImageMagick)
exec convert "eps:$ifile" -scale "$sizex$size" "png:$ofile"</pre><p>Deseu aquest script com <code class="filename">eps-thumbnailer</code>, comproveu que sigui executable i insta&#320;leu-lo a  <code class="filename">/usr/local/bin</code>.</p><pre class="screen">
$ chmod +x eps-thumbnailer
$ sudo install eps-thumbnailer /usr/local/bin/eps-thumbnailer</pre><p>El següent que us cal és crear el fitxer de descripció del miniaturitzador <code class="filename">eps-thumbnailer.desktop</code>, que serà com:</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=EPS Thumbnailer
Name[ca]=Miniaturitzador EPS
TryExec=convert
MimeType=image/x-eps;
X-Thumbnailer-Exec=/usr/local/bin/eps-thumbnailer %i %o %s</pre><p>Aquest fitxer s'ha d'insta&#320;lar a <code class="filename">/usr/local/share/thumbnailers</code> (creeu la carpeta si aquesta no existeix).</p><pre class="screen">
$ sudo install -d /usr/local/share/thumbnailers
$ sudo install eps-thumbnailer.desktop /usr/local/share/thumbnailers/eps-thumbnailer.desktop</pre><p>El fitxer <code class="filename">eps-thumbnailer.desktop</code> empra la clau especial <code class="literal">TryExec</code>, la qual, si s'especifica, anomena una ordre que haurà d'estar present en el vostre sistema per a que el miniaturitzador funcioni. En aquest cas, un script no té cap utilitat si l'ordre <span class="command"><strong>convert</strong></span> no està en el sistema.</p><p>El darrer pas és generar la memòria cau del miniaturitzador i, així, Thunar mostrarà les miniatures. La memòria cau del miniaturitzador es troba a <code class="filename">$XDG_CACHE_HOME/Thunar/thumbnailers.cache</code> (a no ser que vostè o l'administrador del sistema hageu sobreesrcit, <code class="varname">$XDG_CACHE_HOME</code> apunta a la carpeta <code class="filename">~/.cache/</code>). La memòria cau del miniaturitzador la genera periòdicament Thunar, però podeu forçar la seva regeneració mitjançant l'ordre <code class="filename">thunar-vfs-update-thumbnailers-cache-1</code> i que és part de Thunar. Aquesta utilitat generalment la trobareu a la sub-carpeta <code class="filename">libexec</code> del prefixe de la vostra insta&#320;lació (<code class="filename">sbin</code> a Debian/Ubuntu). Per exemple, si Thunar s'ha insta&#320;lat a <code class="filename">/usr</code>, crideu-la de la següent manera:</p><pre class="screen">$ /usr/libexec/thunar-vfs-update-thumbnailers-cache-1</pre><p>Però comproveu que l'executeu des de el vostre compte d'usuari i no des de el del super-usuari, ja que la memòria cau dels miniaturitzadors es desen en la vostra carpeta i no en una del sistema.</p><p>Ara, si Thunar s'ha compilat amb compatibilitat per fer el seguiment de les alteracions de fitxers (ja sigui emprant els serveis de FAM o de Gamin), agafarà de forma automàtica la memòria cau dels nous moniaturitzadors en uns pocs segons i, després, serà capaç de generar miniatures emprant els vostres miniaturitzadors personalitzats. En cas contrari, caldrà que reinicieu Thunar per aplicar els canvis emprant</p><pre class="screen">$ Thunar -q</pre><p>per finalitzar qualsevol instància que s'estigui executat i, així, reiniciar-lo des del llançador.</p></div><div class="sect3" title="Neteja de miniatures"><div class="titlepage"><div><div><h4 class="title"><a name="cleaning-up-thumbnails"></a>Neteja de miniatures</h4></div></div></div><p>Les miniatures generades es desen a la carpeta <code class="filename">~/.thumbnails/</code> en compliment amb aquest <a class="ulink" href="http://jens.triq.net/thumbnail-spec/index.html" target="_top">estàndard de gestió de miniatures</a>. Quan es prova un miniaturitzador nou pot ser útil netejar la memòria cau de miniatures emprant</p><pre class="screen">$ rm -rf ~/.thumbnails/</pre><p>que us alliberarà una mica d'espai lliure en la vostra carpeta d'usuari. Degut a que tota la informació desada en aquesta carpeta es genera automàticament a partir de fitxers del vostre sistema, no perdreu cap informació important.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preferences.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="advanced-topics.html">Següent</a></td></tr><tr><td width="40%" align="left" valign="top">Preferències del gestor de fitxers </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inici</a></td><td width="40%" align="right" valign="top"> Temes avançats</td></tr></table></div></body></html>
