<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Personalizar Thunar</title><link rel="stylesheet" href="../thunar.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="Xestor de ficheiros Thunar"><link rel="up" href="index.html" title="Xestor de ficheiros Thunar"><link rel="prev" href="preferences.html" title="Preferencias da xestión de ficheiros"><link rel="next" href="advanced-topics.html" title="Temas avanzados"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Personalizar Thunar</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="preferences.html">Anterior</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="advanced-topics.html">Próximo</a></td></tr></table><hr></div><div class="sect1" title="Personalizar Thunar"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="customizing-thunar"></a>Personalizar Thunar</h2></div></div></div><p>Este capítulo describe como adaptar ás súas necesidades certas partes do xestor de ficheiros.</p><div class="sect2" title='O menú "Enviar a"'><div class="titlepage"><div><div><h3 class="title"><a name="sendto"></a>O menú "Enviar a"</h3></div></div></div><p>Thunar inclúe un menú <span class="guilabel"><strong>Enviar a</strong></span>, o cal proporciona destinos posibles a onde poder enviar os ficheiros e os cartafoles. Para acceder ao menú <span class="guilabel"><strong>Enviar a</strong></span>, seleccione <span class="guimenu"><strong>Ficheiro</strong></span> &#8594; <span class="guimenuitem"><strong>Enviar a</strong></span> no menú principal, ou prema co botón dereito nun ficheiro ou cartafol e seleccione <span class="guimenuitem"><strong>Enviar a</strong></span>.</p><div class="screenshot"><div class="mediaobject"><img src="images/sendto-menu.png" alt='Menú "Enviar a"'></div></div><p>Por defecto o menú <span class="guilabel"><strong>Enviar a</strong></span> inclúe unha entrada chamada <span class="guilabel"><strong>Escritorio (Crear ligazón)</strong></span> para todos os ficheiros e cartafoles, que simplemente crea unha ligazón no escritorio por cada ficheiro seleccionado. Ademais se o <span class="guilabel"><strong>Panel de atallos</strong></span> está activado, o menú tamén inclúe unha entrada chamada <span class="guilabel"><strong>Panel lateral (Crear atallo)</strong></span> para os cartafoles, o cal lle permite aos usuarios engadir novos atallos ao panel lateral. Despois destas entradas, <strong class="application"><code>Thunar</code></strong> lista as unidades extraíbles conectadas ao ordenador. Na captura de pantalla de enriba, a <span class="guilabel"><strong>Disqueteira</strong></span> representa un destino posible a onde se poden enviar os ficheiros. Teña en conta que o dispositivo se monta automaticamente unha vez que se selecciona no menú <span class="guilabel"><strong>Enviar a</strong></span> de forma que non ten que montala a man.</p><p>Ademais <strong class="application"><code>Thunar</code></strong> tamén proporciona o engadido <strong class="application"><code>thunar-sendto-email</code></strong>, o cal engade a entrada <span class="guilabel"><strong>Enviar correo</strong></span> ao menú, a cal abre o cliente de correo electrónico cos ficheiros anexos a unha nova mensaxe. Se a selección contén polo menos un cartafol, os elementos seleccionados engádense a un arquivo ZIP antes de anexalo á mensaxe. Noutro caso, se a selección contén varios ficheiros, ou un só ficheiro, de tamaño maior a 200 Kib, preguntaraselle ao usuario se desexa empaquetar os ficheiros nun arquivo ZIP e enviar o ficheiro ZIP.</p><p>Como con moitas outras funcionalidades de <strong class="application"><code>Thunar</code></strong>, os usuarios e dos desenvolvedores de aplicativos pode estender facilmente o menú <span class="guilabel"><strong>Enviar a</strong></span> con novos destinos, usando o estándar de <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fdesktop_2dentry_2dspec" target="_top">Ficheiros de entradas desktop</a>. Estes ficheiros deben estar instalados nun dos cartafoles <code class="filename">$XDG_DATA_DIRS/Thunar/sendto/</code> (consulte a <a class="ulink" href="http://freedesktop.org/wiki/Standards_2fbasedir_2dspec" target="_top">XDG Base Directory Specification</a> para obter detalles sobre a variable <code class="literal">$XDG_DATA_DIRS</code>).</p><p>O <code class="literal">Tipo MIME</code> do <code class="filename">.desktop</code> destino especifica os tipos de ficheiros para os cales debe estar dispoñible esta acción no menú <span class="guilabel"><strong>Enviar a</strong></span>. Por exemplo, digamos que desexa engadir unha entrada para unha ferramenta de suba de ficheiros de <a class="ulink" href="http://flickr.com/" target="_top">Flickr</a>, así que esta entrada só debe mostrarse se a selección contén ficheiros JPEG (Flickr non soporta outros formatos de ficheiro) e polo tanto debe engadir unha liña <code class="literal">MimeType=image/jpeg;</code>. Se non especifica ningún <code class="literal">Tipo MIME</code> a entrada mostrarase para todos os tipos de ficheiro.</p><p>Debaixo móstrase un exemplo completo usando o aplicativo <strong class="application"><code>postr</code></strong>:</p><pre class="programlisting">
# postr.desktop - Integrate postr into
#                 the "Send To" menu.
[Desktop Entry]
Type=Application
Version=1.0
Encoding=UTF-8
TryExec=postr
Exec=postr %F
Icon=postr
Name=Flickr
MimeType=image/jpeg;</pre><p>Se instala este ficheiro en <code class="filename">~/.local/share/Thunar/sendto/</code> (cree o cartafol se aínda non existe), o menú <span class="guilabel"><strong>Enviar a</strong></span> dos ficheiros JPEG mostrará a nova entrada <span class="guilabel"><strong>Flickr</strong></span>, a cal se pode usar para subir imaxes JPEG a Flickr.</p><p>A <a class="ulink" href="http://thunar.xfce.org/pwiki/documentation/sendto_menu" target="_top">Wiki do proxecto Thunar</a> contén exemplos adicionais de destinos útiles para o menú <span class="guilabel"><strong>Enviar a</strong></span>. Vostede é libre de extender a páxina da Wiki con novos exemplos.</p></div><div class="sect2" title="Miniaturizadores"><div class="titlepage"><div><div><h3 class="title"><a name="thumbnailers"></a>Miniaturizadores</h3></div></div></div><p>Thunar usa pequenas utilidades para crear miniaturas de certos tipos de ficheiros e mostra as miniaturas como vista previa do contido do ficheiro. Estas pequenas ferramentas chámanse miniaturizadores. Thunar publícase con miniaturizadores para imaxes e ficheiros de tipo de letra, e usa automaticamente os miniaturizadores instalados por GNOME se se instalou con soporte para <code class="literal">gconf</code>. Aínda así os usuarios poden estender de xeito dinámico esta funcionalidade básica con miniaturizadores para tipos de ficheiros adicionais.</p><p>Se pensa escribir un miniaturizador propio, ten que comezar cun programa que acepte polo menos dous parámetros de liña de ordes, o ficheiro de entrada, que é do tipo de ficheiro que pensa soportar e mailo ficheiro de saída, que é un ficheiro PNG que cumpre o formato especificado no <a class="ulink" href="http://jens.triq.net/thumbnail-spec/creation.html#AEN139" target="_top">Thumbnail Management Standard</a>. Ademais o seu programa tamén podería aceptar o tamaño desexado da miniatura, que é opcional pero moi recomendable. Se escribe un ficheiro de saída cun tamaño de imaxe arbitrario, Thunar escalarao posteriormente ao tamaño desexado, o que podería producir un resultado menos óptimo do que se obtería xerando unha miniatura das dimensións solicitadas.</p><p>Unha vez que a súa utilidade para xerar miniaturas estea rematada, terá que rexistrar o seu miniaturizador para que Thunar sexa capaz de atopalo e usalo. Polo tanto todo o que ten que facer é instalar un ficheiro de descrición do miniaturizador (un ficheiro <code class="filename">.desktop</code>) nunha das rutas <code class="filename">$XDG_DATA_DIRS/thumbnailers/</code>. Por exemplo se desexa rexistrar o miniaturizador só para a súa conta de usuario, pode instalar o ficheiro no cartafol <code class="filename">~/.local/share/thumbnailers/</code>. O <code class="filename">.desktop</code> dos miniaturizadores ten o seguinte formato.</p><div class="sect3" title="Formato do ficheiro de descrición do miniaturizador"><div class="titlepage"><div><div><h4 class="title"><a name="thumbnailer-desktop-file-format"></a>Formato do ficheiro de descrición do miniaturizador</h4></div></div></div><p>Os ficheiros de descrición de miniaturizadores utilizan o <a class="ulink" href="http://standards.freedesktop.org/desktop-entry-spec/latest/" target="_top">Desktop Entry Format</a> cun <code class="literal">Tipo</code> especial <code class="literal">X-Thumbnailer</code> o campo especial <code class="literal">X-Thumbnailer-Exec</code> con novos códigos de campo. Basicamente un ficheiro de descrición de miniaturizador ten o seguinte formato.</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=O seu miniaturizador
MimeType=tipo-mime-soportado/polo-miniaturizador;
X-Thumbnailer-Exec=o-seu-miniaturizador %i %o %s</pre><p><code class="literal">Version</code> e <code class="literal">Encoding</code> son obrigatorios debido á Desktop Entry Specification, así que use os valores que se mostran no exemplo de enriba. O campo <code class="literal">Type</code> debe ter o valor especial <code class="literal">X-Thumbnailer</code>, ou senón non se recoñecerá o seu miniaturizador. O valor <code class="literal">Name</code> describe o seu miniaturizador.</p><p>O campo <code class="literal">X-Thumbnailer-Exec</code> contén a orde para executar o seu miniaturizador, e admite certos códigos de campo que se substituirán cando se execute o miniaturizador. Os códigos de campo recoñecidos son os seguintes:</p><div class="variablelist"><dl><dt><span class="term"><code class="varname">%i</code></span></dt><dd><p>A ruta local do ficheiro de entrada co que se vai crear unha miniatura. Pode ser unha ruta relativa ao directorio dende o que se chamou ao miniaturizador ou unha ruta absoluta.</p></dd><dt><span class="term"><code class="varname">%o</code></span></dt><dd><p>A ruta local ao ficheiro de saída onde se vai almacenar a miniatura xerada. O ficheiro de saída debe escribirse como un ficheiro PNG válido que cumpra o estándar de miniaturas (consulte enriba). Teña en conta que a ruta podería non rematar con <code class="literal">.png</code>, que é importante se invoca certas ferramentas de terceiros.</p></dd><dt><span class="term"><code class="varname">%s</code></span></dt><dd><p>O tamaño desexado en píxels da miniatura xerada. Este parámetro é opcional.</p></dd><dt><span class="term"><code class="varname">%u</code></span></dt><dd><p>Semellante a <code class="literal">%i</code>, pero substitúese polo URI do ficheiro, en vez de pola súa ruta. Isto engadiuse para ter compatibilidade con GNOME.</p></dd><dt><span class="term"><code class="varname">%%</code></span></dt><dd><p>Substituirase cun simple <code class="literal">%</code>.</p></dd></dl></div><p>Ten que incluír polo menos <code class="literal">%o</code> e <code class="literal">%i</code> ou <code class="literal">%u</code>, noutro caso o seu miniaturizador será inútil.</p><p><code class="literal">MimeType</code> lista os tipos MIME - separados por punto e coma - para os cales o seu miniaturizador é capaz de crear previsualizacións.</p></div><div class="sect3" title="Exemplo de miniaturizador EPS"><div class="titlepage"><div><div><h4 class="title"><a name="eps-thumbnailer-example"></a>Exemplo de miniaturizador EPS</h4></div></div></div><p>Este exemplo demostra como escribir e instalar un novo miniaturizador para os ficheiros <code class="filename">.eps</code>, o cal usa a utilidade <span class="command"><strong>convert</strong></span> que forma parte de ImageMagick. Primeiro comezamos cun simple script que invoca <span class="command"><strong>convert</strong></span> para xerar unha miniatura do tamaño solicitado.</p><pre class="programlisting">
#!/bin/sh
#
# eps-thumbnailer - Miniaturizador de exemplo para ficheiros EPS.
#
# Modo de uso: esp-thumbnailer ficheiro-eps ficheiro-png tamaño
#

# parámetros de liña de ordes
ifile=$1
ofile=$2
size=$3

# invocar convert (ImageMagick)
exec convert "eps:$ifile" -scale "$sizex$size" "png:$ofile"</pre><p>Garde o script de enriba nun ficheiro <code class="filename">eps-thumbnailer</code>, asegúrese de que o ficheiro é executable e instáleo en <code class="filename">/usr/local/bin</code>.</p><pre class="screen">
$ chmod +x eps-thumbnailer
$ sudo install eps-thumbnailer /usr/local/bin/eps-thumbnailer</pre><p>A continuación haberá que crear o ficheiro de descrición da miniatura <code class="filename">eps-thumbnailer.desktop</code>, que é así:</p><pre class="programlisting">
[Desktop Entry]
Version=1.0
Encoding=UTF-8
Type=X-Thumbnailer
Name=EPS Thumbnailer
TryExec=convert
MimeType=image/x-eps;
X-Thumbnailer-Exec=/usr/local/bin/eps-thumbnailer %i %o %s</pre><p>Este ficheiro debe instalarse en <code class="filename">/usr/local/share/thumbnailers</code> (cree o cartafol se non existe).</p><pre class="screen">
$ sudo install -d /usr/local/share/thumbnailers
$ sudo install eps-thumbnailer.desktop /usr/local/share/thumbnailers/eps-thumbnailer.desktop</pre><p>O ficheiro <code class="filename">eps-thumbnailer.desktop</code> usa a clave especial <code class="literal">TryExec</code>, a cal se se especifica menciona unha orde que debe estar presente no sistema para que o miniaturizador sexa útil. No noso exemplo o script é inútil se a utilidade <span class="command"><strong>convert</strong></span> non está presente.</p><p>O último paso é xerar de novo a caché do miniaturizador, de forma que Thunar detecte ao miniaturizador. A caché do miniaturizador está situada en <code class="filename">$XDG_CACHE_HOME/Thunar/thumbnailers.cache</code> (a menos que o administrador do sistema o cambie, <code class="varname">$XDG_CACHE_HOME</code> apunta ao cartafol <code class="filename">~/.cache/</code>). Thunar xera de novo a caché dos miniaturizadores periodicamente, pero pode forzar que se xere de novo invocando a utilidade <code class="filename">thunar-vfs-update-thumbnailers-cache-1</code>, que se publica como parte de Thunar. Normalmente a utilidade está instalada no subcartafol <code class="filename">libexec</code> en do directorio de instalación (<code class="filename">sbin</code> en Debian/Ubuntu). Así que se por exemplo Thunar está instalado en <code class="filename">/usr</code>, invoque a utilidade do seguinte xeito:</p><pre class="screen">$ /usr/libexec/thunar-vfs-update-thumbnailers-cache-1</pre><p>Pero asegúrese de que executa o programa ca súa conta de usuario, e non ca conta do superusuario, xa que a caché dos miniaturizadores se almacena no seu cartafol persoal, en vez de nun lugar común para todo o sistema.</p><p>Agora se Thunar se compilou con soporte para a monitorización de alteracións nos ficheiros (mediante os servizos FAM ou Gamin), en poucos segundos collerá automaticamente a nova caché dos miniaturizadores e despois será capaz de xerar miniaturas usando os miniaturizadores personalizados. Noutro caso podería necesitar reiniciar totalmente Thunar para aplicar os cambios, usando</p><pre class="screen">$ Thunar -q</pre><p>para terminar calquera instancia en execución, e posteriormente reiniciala dende o seu iniciador.</p></div><div class="sect3" title="Limpar as miniaturas"><div class="titlepage"><div><div><h4 class="title"><a name="cleaning-up-thumbnails"></a>Limpar as miniaturas</h4></div></div></div><p>As miniaturas xeradas almacénanse no cartafol <code class="filename">~/.thumbnails/</code> de acordo co <a class="ulink" href="http://jens.triq.net/thumbnail-spec/index.html" target="_top">Thumbnail Management Standard</a>. Ao probar un novo miniaturizador, podería ser útil limpar a caché de miniaturas usando</p><pre class="screen">$ rm -rf ~/.thumbnails/</pre><p>que tamén lle dará algún espazo libre no seu cartafol persoal. Xa que toda a información almacenada neste cartafol se xera automaticamente a partir dos ficheiros do sistema de ficheiros, non perderá ningún dato importante.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preferences.html">Anterior</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="advanced-topics.html">Próximo</a></td></tr><tr><td width="40%" align="left" valign="top">Preferencias da xestión de ficheiros </td><td width="20%" align="center"><a accesskey="h" href="index.html">Inicio</a></td><td width="40%" align="right" valign="top"> Temas avanzados</td></tr></table></div></body></html>
